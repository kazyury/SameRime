
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=jp">
<title>sendPB_clicked (SameRime::SameRimeClient::SessionForm)</title>
<link rel=StyleSheet href="../../../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body bgcolor="white">
<pre><span class="cmt"># File client/gui.rb, line 183</span>
  <span class="kw">def</span> sendPB_clicked
    <span class="kw">if</span> @messageTXT.text==<span class="str">&quot;&quot;</span>
      messageBox(<span class="str">&quot;メッセージが入力されてません。&quot;</span>)
    <span class="kw">else</span>
      msg=SameRime::Message.new()
      msg.receiver=@target_addr
      msg.message=@messageTXT.text.gsub(<span class="re">/\n/</span>,<span class="str">&quot; &quot;</span>)
      <span class="kw">if</span> @controller.messaging(msg)
        <span class="cmt"># メッセージ送信正常終了</span>
        attr = @historyRE.selformat
        attr.color=0    <span class="cmt"># 自分が送ったメッセージは黒</span>
        attr.fontface=<span class="str">&quot;ＭＳ 明朝&quot;</span>
        attr.height=160
        attr.pitch_family=11
        addtextwithattr(&quot;#{@controller.config[:MyName]}:#{@messageTXT.text}\n&quot;,attr)
        @messageTXT.text=<span class="str">&quot;&quot;</span>
      <span class="kw">else</span>
        <span class="cmt"># メッセージ送信異常終了</span>
        messageBox(<span class="str">&quot;何らかの理由でメッセージ送信に失敗しました。&quot;</span>)
      <span class="kw">end</span>
    <span class="kw">end</span>
  <span class="kw">end</span></pre>
</body>
</html>